<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("./partials/meta") %>
    <title>Manga Store - Open new ticket</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
    <link rel="stylesheet" href="/css/framework.css" />
    <link rel="stylesheet" href="/css/build.min.css" />
    <link rel="stylesheet" href="/css/profile.css" />
    <style>
      .loaderBtn.active {
        width: 30px;
        max-height: 30px;
        aspect-ratio: 1;
        --c: no-repeat linear-gradient(currentColor 0 0);
        background: var(--c) 0% 50%, var(--c) 50% 50%, var(--c) 100% 50%;
        background-size: 20% 100%;
        animation: l1 1s infinite linear;
      }
      @keyframes l1 {
        0% {
          background-size: 20% 100%, 20% 100%, 20% 100%;
        }
        33% {
          background-size: 20% 10%, 20% 100%, 20% 100%;
        }
        50% {
          background-size: 20% 100%, 20% 10%, 20% 100%;
        }
        66% {
          background-size: 20% 100%, 20% 100%, 20% 10%;
        }
        100% {
          background-size: 20% 100%, 20% 100%, 20% 100%;
        }
      }
      aside {
        transform: translateX(-120%);
      }
      @media (min-width: 1024px) {
        aside {
          transform: translateX(0%);
        }
      }

      details summary::-webkit-details-marker {
        display: none;
      }
    </style>
  </head>
  <body class="bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark">
    <%- include("./partials/header") %> <%- include("./partials/alerts-popups") %> <%- include("./partials/loader") %>

    <main class="min-h-screen flex w-full gap-3 pt-16 mb-10">
      <div class="min-h-screen w-full">
        <!-- Main Form Card -->
        <div
          class="container mx-auto pb-6 mt-6 bg-white dark:bg-background-dark shadow-lg rounded-lg border-2 border-primary-light/20 dark:border-primary-dark/20">
          <!-- Header Banner -->
          <div
            class="bg-gradient-to-r from-primary-light to-accent-light dark:from-primary-dark dark:to-accent-dark text-white dark:text-background-dark text-center py-14 px-6 rounded-t-lg">
            <h1 class="text-2xl md:text-3xl font-bold">Get Instant Support for Your Sports Needs!</h1>
            <p class="mt-4 text-lg opacity-90">Raise a ticket, track your issue.</p>
          </div>

          <!-- Form Section -->
          <div class="p-8">
            <h2 class="text-xl sm:text-2xl font-semibold mb-8 text-primary-light dark:text-primary-dark">
              Submit a Support Ticket
            </h2>

            <form id="ticketForm" enctype="multipart/form-data" class="space-y-6">
              <!-- Name Field -->
              <div class="space-y-2">
                <label class="block text-secondary-light dark:text-secondary-dark font-medium">Name</label>
                <input
                  type="text"
                  id="name"
                  class="w-full p-3 border-2 rounded-lg border-secondary-light/20 dark:border-secondary-dark/20 bg-white dark:bg-background-dark focus:border-primary-light dark:focus:border-primary-dark focus:ring-2 focus:ring-primary-light/20 dark:focus:ring-primary-dark/20 transition-colors duration-200"
                  required
                  placeholder="John waston" />
              </div>

              <!-- Email Field -->
              <div class="space-y-2">
                <label class="block text-secondary-light dark:text-secondary-dark font-medium">Email</label>
                <input
                  type="email"
                  id="email"
                  class="w-full p-3 border-2 rounded-lg border-secondary-light/20 dark:border-secondary-dark/20 bg-white dark:bg-background-dark focus:border-primary-light dark:focus:border-primary-dark focus:ring-2 focus:ring-primary-light/20 dark:focus:ring-primary-dark/20 transition-colors duration-200"
                  required
                  placeholder="example@email.com" />
              </div>

              <!-- Subject Field -->
              <div class="space-y-2">
                <label class="block text-secondary-light dark:text-secondary-dark font-medium">Subject</label>
                <input
                  type="text"
                  id="subject"
                  class="w-full p-3 border-2 rounded-lg border-secondary-light/20 dark:border-secondary-dark/20 bg-white dark:bg-background-dark focus:border-primary-light dark:focus:border-primary-dark focus:ring-2 focus:ring-primary-light/20 dark:focus:ring-primary-dark/20 transition-colors duration-200"
                  required
                  placeholder="What's your issue about?" />
              </div>

              <!-- Category Field -->
              <div class="space-y-2">
                <label class="block text-secondary-light dark:text-secondary-dark font-medium">Issue Category</label>
                <select
                  id="category"
                  class="w-full p-3 border-2 rounded-lg border-secondary-light/20 dark:border-secondary-dark/20 bg-white dark:bg-background-dark focus:border-primary-light dark:focus:border-primary-dark focus:ring-2 focus:ring-primary-light/20 dark:focus:ring-primary-dark/20 transition-colors duration-200">
                  <option value="Account">Account</option>
                  <option value="Payment">Payment</option>
                  <option value="Technical">Technical</option>
                  <option value="Other">Other</option>
                </select>
              </div>

              <!-- Description Field -->
              <div class="space-y-2">
                <label class="block text-secondary-light dark:text-secondary-dark font-medium">Description</label>
                <textarea
                  id="description"
                  class="w-full p-3 min-h-[150px] border-2 rounded-lg border-secondary-light/20 dark:border-secondary-dark/20 bg-white dark:bg-background-dark focus:border-primary-light dark:focus:border-primary-dark focus:ring-2 focus:ring-primary-light/20 dark:focus:ring-primary-dark/20 transition-colors duration-200"
                  maxlength="5000"
                  required
                  placeholder="Please describe your issue in detail..."></textarea>
              </div>

              <!-- File Upload Section -->
              <div class="space-y-3">
                <label class="block text-primary-light dark:text-primary-dark font-medium">Attachments</label>
                <label
                  for="file"
                  class="file-upload-label cursor-pointer block border-2 border-dashed rounded-lg p-8 border-primary-light/40 dark:border-primary-dark/40 hover:border-primary-light dark:hover:border-primary-dark transition-colors duration-200">
                  <div class="file-upload-design flex flex-col items-center">
                    <svg viewBox="0 0 640 512" class="h-12 w-12 text-primary-light dark:text-primary-dark mb-3">
                      <path
                        fill="currentColor"
                        d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z" />
                    </svg>
                    <span class="text-primary-light dark:text-primary-dark font-medium mb-2">
                      Drop files here or click to browse
                    </span>
                    <p class="text-sm text-secondary-light dark:text-secondary-dark">Max 5 files, each file max 5MB</p>
                  </div>
                  <input
                    type="file"
                    id="file"
                    name="attachments"
                    multiple
                    class="hidden"
                    accept=".png,.jpg,.jpeg,.pdf" />
                </label>
                <div id="fileList" class="space-y-2"></div>
              </div>

              <!-- Submit Button -->
              <button
                type="submit"
                id="submitButton"
                class="w-full py-4 px-6 rounded-lg font-medium text-white dark:text-background-dark bg-accent-light hover:bg-accent-light/90 dark:bg-primary-dark dark:hover:bg-primary-dark/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 border-2 border-accent-light hover:border-accent-light/90 dark:border-primary-dark dark:hover:border-primary-dark/90 shadow-sm hover:shadow-md flex items-center justify-center gap-2">
                <span class="btnWord">Submit Ticket</span>
                <span class="loaderBtn"></span>
              </button>
            </form>
          </div>
        </div>

        <!-- FAQ Section -->
        <div
          class="container mx-auto my-10 p-8 rounded-lg bg-secondary-light/5 dark:bg-secondary-dark/5 border-2 border-secondary-light/20 dark:border-secondary-dark/20">
          <h2 class="text-2xl font-semibold mb-6 text-primary-light dark:text-primary-dark">
            Common Issues & Solutions
          </h2>

          <div class="space-y-4">
            <% qAndA.forEach((q, index) => { %>
            <details class="group">
              <summary
                class="flex items-center justify-between cursor-pointer p-4 rounded-lg bg-white dark:bg-background-dark hover:bg-primary-light/5 dark:hover:bg-primary-dark/5 border-2 border-secondary-light/10 dark:border-secondary-dark/10 transition-colors duration-200">
                <span class="font-medium text-secondary-light dark:text-secondary-dark"> <%= q.Q %> </span>
                <svg
                  class="w-5 h-5 transition-transform duration-200 group-open:rotate-180 text-primary-light dark:text-primary-dark"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </summary>
              <div
                class="p-4 mt-2 bg-background-light dark:bg-background-dark rounded-lg border-2 border-secondary-light/10 dark:border-secondary-dark/10">
                <p class="text-primary-light dark:text-text-dark"><%= q.A %></p>
              </div>
            </details>
            <% }) %>
          </div>
        </div>
      </div>
    </main>

    <%- include('partials/footer') %>
    <script src="/js/cart.js"></script>
    <script src="/js/new-ticket.js" type="module"></script>
  </body>
</html>
